openapi: 3.0.0
info:
  version: '1.0'
  title: Liberty API
servers:
  - url: /api/v1
paths:
  #---
  # SYS API
  #---
  /sys/configs/app:
    get:
      tags:
        - System
      summary: 서비스 설정값
      description: 클라이언트에서 필요한 서비스 설정값을 가져온다
      operationId: getConfigsApp
      responses:
        '200':
          description: Service Config
          content:
            application/json:
              schema:
                type: object
                properties:
                  bwAccount:
                    type: object
                    properties:
                      bankName:
                        type: string
                        description: 블루웨일 입금 계좌 은행
                        example: DBS Bank
                      accountNumber:
                        type: string
                        description: 블루웨일 입금 계좌번호
                        example: 1002-342-302953
                      accountOwner:
                        type: string
                        description: 블루웨일 입금 계좌 은행명
                        example: 블루웨일
                      swiftCode:
                        type: string
                        description: 블루웨일 계좌 swiftCode
                        example: DBSSSGSG
                      bankAddress:
                        type: string
                        description: 은행 주소
                        example: 12 Marina Boulevard, DBS Asia Central, Marina Bay Financial Centre Tower 3, Singapore 018982
                  localBankAccount:
                    type: array
                    items:
                      type: object
                      properties:
                        currency:
                          $ref: '#/components/schemas/CurrencyCode'
                        isUsed:
                          type: boolean
                          example: true
                        bankName:
                          type: string
                          example: 'DBS Bank - UK'
                        accountOwner:
                          type: string
                          example: 'Shareable Asset PL - UK'
                        accountNumber:
                          type: string
                          example: '072-022963-0'
                  showPreference:
                    type: "array"
                    items:
                      type: "string"
                    example: ["rewardBanner"]
                  otpTimeout:
                    type: "object"
                    description: "otp 기다리는 시간 timeout"
                    properties:
                      value:
                        type: integer
                        example: 120
                      timeScale:
                        type: string
                        description: "otpTimeout value에 대한 부가 설명"
                        example: "seconds (possible value: 60~120)"
                  timestamp:
                    type: integer
                    description: "server의 unix timestamp"
                    example: 1608194428984
                  timezone:
                    type: string
                    description: "Local Time Zone"
                    example: "Asia/Singapore"
                  idDocsSelectableCountries:
                    type: array
                    items:
                      type: object
                      properties:
                        countryCode:
                          type: string
                          example: KOR
                        passport:
                          type: boolean
                          example: true
                        nationalId:
                          type: boolean
                          example: true
                        drivingLicense:
                          type: boolean
                          example: true
                        residencePermit:
                          type: boolean
                          example: true
  /sys/versions:
    get:
      tags:
        - System
      summary: 지원 가능한 모바일 앱의 버전 정보를 가져온다
      description: 지원 가능한 Android와 iOS 의 minimum version, latest version 을 가져온다
      operationId: getVersions
      responses:
        '200':
          description: 지원 가능한 MobileVersion
          content:
            application/json:
              schema:
                type: object
                properties:
                  androidVersion:
                    $ref: '#/components/schemas/MobileVersion'
                  iosVersion:
                    $ref: '#/components/schemas/MobileVersion'

  #---
  # Auth API
  #---
  /auth/token/status:
    get:
      summary: jwtToken 확인
      description: 로그인 후 jwtToken 유효 여부 확인
      operationId: getAuthTokenStatus
      tags:
        - Auth
      parameters:
        - in: header
          name: signUp-jwt
          description: 임시회원 토큰
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  userStatus:
                    $ref: '#/components/schemas/userStatus'
                    example: NOT_MEMBER
                  onboardingStatus:
                    $ref: '#/components/schemas/onboardingStatus'
                    example: ''
                  authLevel:
                    $ref: '#/components/schemas/AuthLevel'
                    example: NEW
        401:
          description: |
            - NO_JWT_TOKEN, No JWT token provided
            - NO_USER_FOR_JWT, No user for the JWT token
            - INVALID_JWT, No longer valid JWT token(Logged in another device)
            - EXPIRED_JWT, jwt expired
      security:
        - bearerAuth: []
  /auth/session/status:
    get:
      summary: 로그인 여부 확인
      description: 로그인 후 session 유효 확인
      operationId: getAuthSessionStatus
      tags:
        - Auth
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  userStatus:
                    $ref: '#/components/schemas/userStatus'
                    example: ONBOARDING_MEMBER
                  onboardingStatus:
                    $ref: '#/components/schemas/onboardingStatus'
                    example: SUITABILITY_DONE
                  authLevel:
                    $ref: '#/components/schemas/AuthLevel'
                    example: PROFILE
        401:
          description: |
            - INVALID_SESSION, session expired.
            - INVALID_SID, No longer valid Session ID
      security:
        - cookieAuth: []
  /auth/member/status:
    get:
      summary: 회원 상태 확인
      description: 전화번호를 이용해 회원가입/임시회원/비회원 여부 확인
      operationId: getAuthMemberStatus
      tags:
        - Auth
      parameters:
        - in: query
          name: countryCallingCode
          description: 국가번호
          schema:
            type: string
            example: '+82'
        - in: query
          name: phone
          description: 확인하려는 모바일 번호
          schema:
            type: string
            example: '01012341234'
        - in: query
          name: deviceId
          description: 앱이 설치되어 있는 device id
          schema:
            type: string
            example: 11a3eef5-a726-4ecd-a618-993131e67ae9
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  userStatus:
                    $ref: '#/components/schemas/userStatus'
                    example: NOT_MEMBER
                  onboardingStatus?:
                    $ref: '#/components/schemas/onboardingStatus'
                  isDeviceNotChanged:
                    type: boolean
                    description: device id가 일치 하지 않을때 false. (deviceId값을 보내지 않을때는 true값만 리턴한다.)
                    example: true
        401:
          description: |
            - INVALID_INVESTOR_TYPE, 개인 회원이 아닙니다.
  /auth/signup00/member:
    post:
      summary: 회원등록
      description: 회원을 등록하고 모바일 OTP를 요청한다.
      operationId: postAuthSignupMember
      tags:
        - Auth Signup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                countryCallingCode:
                  type: string
                  description: 국제 전화번호 코드
                  example: '+82'
                phone:
                  type: string
                  description: 모바일 전화번호
                  example: '01012341234'
                deviceModel:
                  type: string
                  example: Mi MIX 2S
                deviceId:
                  type: string
                  example: 11a3eef5-a726-4ecd-a618-993131e67ae9
                osVersion:
                  type: string
                  example: '29'
                appVersion:
                  type: string
                  example: 3.1.5
                adsId?:
                  type: string
                  example: a472b9b2-39df-49e6-aa6b-f465d9f5c6d1
                devicePlatform?:
                  type: string
                  enum: [ANDROID, IOS]
                  example: ANDROID
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  countryCallingCode:
                    type: string
                    description: 국제 전화번호 코드
                    example: '+82'
                  phone:
                    type: string
                    description: 모바일 전화번호
                    example: '01012341234'
                  userStatus:
                    $ref: '#/components/schemas/userStatus'
                    example: EPH_MEMBER
                  requestId:
                    type: string
                    description: otp 발송요청했을때 받은 인증 키값
                    example: 'xxxxxxxxxxxxxxxxxxxxxxx'
        401:
          description: ALREADY_REGISTERED 가입중 이거나 완료된 회원입니다.
  /auth/signup10/otp/mobile/verify:
    post:
      summary: otp 확인. 신규가입
      description: 요청한 otp 확인
      operationId: postAuthSignupOtpMobileVerify
      tags:
        - Auth Signup
      parameters:
        - in: header
          name: otpcode
          description: 발급받은 otp 번호
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                requestId:
                  type: string
                  description: otp 발송요청했을때 받은 인증 키값
                  example: 'xxxxxxxxxxxxxxxxxxxxxxx'
      responses:
        200:
          description: Success
          headers:
            Set-Cookie:
              schema:
                type: string
                example: signup-jwt=xxxx.signup-jwt-asdfsa; Path=/; HttpOnly
              description: 임시회원 토큰
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        400:
          description: INVALID_CODE, The code provided does not match the expected value
  /auth/signup20/member/passcode:
    put:
      summary: 비밀번호.
      description: 새로운 비밀번호를 생성한다.
      operationId: putAuthMemberPasscode
      tags:
        - Auth Signup
      parameters:
        - in: header
          name: signUp-jwt
          description: 임시회원 토큰
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  example: mypassword
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
      security:
        - bearerAuth: []
  /auth/signup30/otp/email:
    post:
      tags:
        - Auth Signup
      summary: 이메일 OTP 인증요청. 신규가입
      description: 로그인 없이 이메일로 인증번호 요청
      operationId: postAuthSignupOtpEmail
      parameters:
        - in: header
          name: signUp-jwt
          description: 임시회원 토큰
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: 인증 받는 유저의 이메일
                  example: test@test.com
      responses:
        200:
          description: "successful operation"
          content:
            application/json:
              schema:
                properties:
                  requestId:
                    type: string
                    description: otp 인증 키값
                  remainTime:
                    type: number
                    description: verify 남은 시간(초)
        400:
          description:  이미 존재하는 이메일입니다.
      security:
        - bearerAuth: []
  /auth/signup40/otp/email/verify:
    post:
      summary: otp 확인. 신규가입
      description: 요청한 otp 확인
      operationId: postAuthSignupOtpEmailVerify
      tags:
        - Auth Signup
      parameters:
        - in: header
          name: signUp-jwt
          description: 임시회원 토큰
          schema:
            type: string
        - in: header
          name: otpcode
          description: 발급받은 otp 번호
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        400:
          description: INVALID_CODE, The code provided does not match the expected value
      security:
        - bearerAuth: []
  /auth/signup50/member/finish:
    post:
      summary: 회원가입완료
      description: 암호화된 PrivateKey를 저장하고 세션을 생성한다.
      operationId: postAuthSignupMemberFinish
      tags:
        - Auth Signup
      parameters:
        - in: header
          name: signUp-jwt
          description: 임시회원 토큰
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                encryptedPK:
                  type: string
                  description: 암호화된 PrivateKey
                  example: 238909as9d99823khafsd9f8asd9f8h23kjfhaws9d8f
                marketingAllowed:
                  type: boolean
                  example: true
      responses:
        200:
          description: Success
          headers:
            Set-Cookie:
              schema:
                type: string
                example: liberty.sid=abcde12345; Path=/; HttpOnly
              description: 로그인 세션
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
      security:
        - bearerAuth: []
  /auth/signup54-optional/member/bio/publicKey:
    post:
      tags:
        - Auth Signup
      summary: 'bio 인증을 위한 public key 등록, 신규'
      description: 'bio 인증을 위한 public key 등록, 신규'
      operationId: postSignupMemberBioPublicKey
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                publicKey:
                  type: string
                  description: PEM형식으로 default base64타입
                  example: -----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEIZmdW4rKOJFvgVtA5BJwJtrQBD0rpWjMKZ2b6tev\nke9MTgw8Lf7xodca8mca9blFj7lOKP5qhXm4WWQ+OZ41Pw==\n-----END PUBLIC KEY-----
                deviceId:
                  type: string
                  description: signIn시, 보낸 deviceId
                  example: 11a3eef5-a726-4ecd-a618-993131e67ae9
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
        400:
          description: |
            - INVALID_INPUT, 'Already Registered'
            - INVALID_INPUT, 'Different deviceId'
      security:
        - cookieAuth: []
  /auth/signup54-optional/member/bio/challenge:
    post:
      tags:
        - Auth Signup
      summary: "신규"
      description: 모바일에서 바이오인증을 위한 메시지 중 challenge값 요청
      operationId: getAuthSignupMemberBioChallenge
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  challenge:
                    type: string
                    example: "qs2PzfZH_Q"
                    description: 10자리 랜덤문자
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
      security:
        - cookieAuth: []
  /auth/signup55-optional/member/bio/verify:
    post:
      tags:
        - Auth Signup
      summary: "신규"
      description: 바이오 인증요청
      operationId: postAuthSignupMemberBio
      parameters:
        - in: header
          name: nonce
          description: 바이오sign시, 사용한 nonce
          schema:
            type: number
            example: 37790051
        - in: header
          name: signature
          description: 바이오sign시, 나온 signature. url-safe base64
          schema:
            type: string
            example: MEYCIQDIhAvWQFRqa_vV8PCfKRe9R9ia955dlL7S6UG_Zp8RtgIhANdrVql-ZjrpCxaM0saAf2gBqXRKeXIX5USinmncahLX
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
      security:
        - cookieAuth: []
  /auth/signup60/member/suitability:
    get:
      summary: suitability 질문
      description: suitability 질문 목록 조회
      operationId: getSignupMemberAuthSuitability
      tags:
        - Auth Signup
      parameters:
        - in: query
          name: language
          description: 조회 하려는 언어 (ISO_639-1, en - english, ko - korean)
          schema:
            type: string
            enum:
              - en
              - ko
            example: en
      responses:
        200:
          description: "successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuitabilityQuestions"
      security:
        - cookieAuth: []
  /auth/signup70/member/suitability/answer:
    post:
      summary: suitability 답변
      description: suitability 답변 저장
      operationId: postAuthSignupMemberSuitabilityAnswer
      tags:
        - Auth Signup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                answers:
                  type: array
                  items:
                    type: object
                    properties:
                      q:
                        type: number
                        description: 질문 번호
                        example: 1
                      a:
                        type: string
                        description: 질문의 보기 id
                        enum: ['A','B','C']
                        example: A
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  investProfile:
                    type: string
                    enum: ['AGGRESSIVE', 'BALANCED', 'CONSERVATIVE']
  /auth/signup80/member/suitability/finish:
    post:
      summary: suitability 완료
      description: suitability 끝날때 호출 해줘야 하는 api, 호출하면 onboardingStatus가 SUITABILITY_DONE로 변경된다.
      operationId: postAuthSignupMember/SuitabilityFinish
      tags:
        - Auth Signup
      requestBody:
        content:
          application/json:
            schema:
              properties:
                investProfile?:
                  type: string
                  enum: ['AGGRESSIVE', 'BALANCED', 'CONSERVATIVE']
                  example: BALANCED
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
      security:
        - cookieAuth: []

  # signin
  /auth/signin/passcode:
    post:
      summary: Passcode를 입력
      description: 전화번호와 passcode 확인, 로그인 시도 5회 초과 검사
      operationId: postAuthSigninPasscode
      tags:
        - Auth Signin
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  userStatus:
                    type: string
                    enum: [NOT_MEMBER, EPH_MEMBER, ONBOARDING_MEMBER,
                          BANED_MEMBER, MEMBER, DELETED_MEMBER]
                    example: ONBOARDING_MEMBER
        401:
          description: |
            - NO_USER, 없는 유저 입니다.
            - INVALID_PASSWORD, 잘못된 비밀번호 입니다.
            - BAN_MEMBER, 로그인 금지된 계정입니다. 관리자에게 문의 하세요.
        403:
          description: EXCEED_RETRY 로그인 시도 횟수 5회 초과 입니다.
  /auth/otp/mobile/{action}:
    post:
      tags:
        - Auth OTP
      summary: 모바일 OTP 인증 요청
      description: 모바일 OTP 인증 요청
      operationId: postAuthOtpMobileAction
      parameters:
        - in: path
          name: action
          required: true
          schema:
            type: string
            enum: [invest, withdraw, backUpWallet, qrOp, changePassword, signin,
                  changeBankAccount, deletedMember, adminSignIn, usersMe,
                  reRegisterPublic, currencyExchange, changePhoneNumber]
            example: invest
      responses:
        200:
          description: "successful operation"
          content:
            application/json:
              schema:
                properties:
                  requestId:
                    type: string
                    description: otp 인증 키값
                    example: saldjf23r23
                  remainTime:
                    type: number
                    description: verify 남은 시간(초)
                    example: 60
        400:
          description: |
            - "INVALID_TYPE, No OptType: {action}"
            - SMS_REQUEST_ERROR
            - Throttled, Throttled	You are trying to send more than the maximum of 30 requests per second.
            - ParameterMissing, Your request is incomplete and missing the mandatory parameter $parameter	The stated parameter is missing.
            - InvalidValue, Invalid value for parameter $parameter	Invalid value for parameter.If you see Facility not allowed in the error text, check that you are using the correct Base URL in your request.
            - InvalidCredential, Invalid credentials were provided	The supplied API key or secret in the request is either invalid or disabled.
            - InternalError, Internal Error	An error occurred processing this request in the Cloud Communications Platform.
            - Unable, "The Nexmo platform was unable to process this message for the following reason - $reason	The request could not be routed."
            - BlackList, The number you are trying to verify is blacklisted for verification.
            - Barred, The api_key you supplied is for an account that has been barred from submitting messages.
            - OutOfBalance, Partner quota exceeded	Your account does not have sufficient credit to process this request.
            - Duplicated, Concurrent verifications to the same number are not allowed
            - Rejected, The destination number is not in a supported network	The request has been rejected. Find out more about this error in the Knowledge Base
            - NotMatched, The code inserted does not match the expected value
            - WrongCode, The wrong code was provided too many times	You can run Verify check on a specific request_id up to three times unless a new verification code is generated. If you check a request more than three times, it is set to FAILED and you cannot check it again.
            - TooManyRequest, Too many request_ids provided	You added more than the maximum ten request_ids to your request.
            - NoMoreEvent, No more events are left to execute for this request
            - NotSupport, This account does not support the parameter - pin_code.	Only certain accounts have the ability to set the pin_code. Please contact your account manager for more information.
            - NoRequestFound, No request found	There are no matching verify requests.
        401:
          description: NO_USER 입력한 전화번호와 일치하는 유저가 없습니다.
  /auth/signin/otp:
    post:
      summary: OTP를 이용한 로그인
      description: OTP를 이용하여 최종 로그인을 한다.
      operationId: postAuthsigninOtp
      tags:
        - Auth Signin
        - Auth OTP
      parameters:
        - in: header
          name: otpcode
          description: otp 인증 코드
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                countryCallingCode:
                  type: string
                  description: 국제 전화번호 코드
                  example: '+82'
                phone:
                  type: string
                  description: 모바일 전화번호
                  example: '01012341234'
                deviceModel:
                  type: string
                  example: Mi MIX 2S
                deviceId:
                  type: string
                  example: 11a3eef5-a726-4ecd-a618-993131e67ae9
                osVersion:
                  type: string
                  example: '29'
                appVersion:
                  type: string
                  example: 3.1.5
                adsId?:
                  type: string
                  example: a472b9b2-39df-49e6-aa6b-f465d9f5c6d1
                devicePlatform?:
                  type: string
                  enum: [ANDROID, IOS]
                  example: ANDROID
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  countryCallingCode:
                    type: string
                    description: 국제 전화번호 코드
                    example: '+82'
                  phone:
                    type: string
                    description: 모바일 전화번호
                    example: '01012341234'
                  userStatus:
                    type: string
                    enum: [NOT_MEMBER, TEMP_MEMBER, BANED_MEMBER, MEMBER, DELETED_MEMBER]
                    example: MEMBER
                  onboardingStatus:
                    $ref: '#/components/schemas/onboardingStatus'
                  authLevel:
                    $ref: '#/components/schemas/AuthLevel'
                    type: string
                  isMigrationAgree:
                    type: boolean
                    description: migration 동의 여부
                    example: false
        401:
          description: |
            - NO_USER 입력한 이메일과 일치하는 유저가 없습니다.
            - BAN_MEMBER 로그인 금지된 계정입니다. 관리자에게 문의 하세요.
            - INVALID_MEMBER 회원가입이 완료되지 않았습니다.
        403:
          description: |
            - EXCEED_RETRY 로그인 시도 횟수 5회 초과 입니다.
            - INVALID_PASSWORD 잘못된 비밀번호 입니다.
        500:
          description: NO_URL_OR_METHOD 로그인 jwt fund에 반영 실패!
  /auth/member/bio/challenge/{action}:
    post:
      tags:
        - Auth Bio
      summary: 바이오 인증을 위한 challenge값 요청
      description: 모바일에서 바이오인증을 위한 메시지 중 challenge값 요청
      operationId: getAuthMemberBioChallenge
      parameters:
        - in: path
          name: action
          required: true
          schema:
            type: string
            enum: [invest, addFunds, withdraw, backUpWallet, qrOp, signin,
                  changeBankAccount, deletedMember, usersMe, registerPublic,
                  currencyExchange]
            example: invest
          description: 바이오 인증을 하기 위한 동작
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  challenge:
                    type: string
                    example: "qs2PzfZH_Q"
                    description: 10자리 랜덤문자
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
      security:
        - cookieAuth: []
  /auth/signin/bio:
    post:
      summary: '바이오 인증'
      description: 바이오 인증 통한 최종 로그인
      operationId: postAuthSigninBio
      tags:
        - Auth Signin
        - Auth Bio
      parameters:
        - in: header
          name: nonce
          description: 바이오sign시, 사용한 nonce
          schema:
            type: string
            example: 37790051
        - in: header
          name: signature
          description: 바이오sign시, 나온 signature. url-safe base64
          schema:
            type: string
            example: MEYCIQDIhAvWQFRqa_vV8PCfKRe9R9ia955dlL7S6UG_Zp8RtgIhANdrVql-ZjrpCxaM0saAf2gBqXRKeXIX5USinmncahLX
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                countryCallingCode:
                  type: string
                  description: 국제 전화번호 코드
                  example: '+82'
                phone:
                  type: string
                  description: 모바일 전화번호
                  example: '01012341234'
                deviceModel:
                  type: string
                  example: Mi MIX 2S
                deviceId:
                  type: string
                  example: 11a3eef5-a726-4ecd-a618-993131e67ae9
                osVersion:
                  type: string
                  example: '29'
                appVersion:
                  type: string
                  example: 3.1.5
                adsId?:
                  type: string
                  example: a472b9b2-39df-49e6-aa6b-f465d9f5c6d1
                devicePlatform?:
                  type: string
                  enum: [ANDROID, IOS]
                  example: ANDROID
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  countryCallingCode:
                    type: string
                    description: 국제 전화번호 코드
                    example: '+82'
                  phone:
                    type: string
                    description: 모바일 전화번호
                    example: '01012341234'
                  userStatus:
                    type: string
                    enum: [NOT_MEMBER, TEMP_MEMBER, BANED_MEMBER, MEMBER, DELETED_MEMBER]
                    example: MEMBER
                  onboardingStatus:
                    $ref: '#/components/schemas/onboardingStatus'
                  authLevel:
                    $ref: '#/components/schemas/AuthLevel'
                    type: string
                  isMigrationAgree:
                    type: boolean
                    description: migration 동의 여부
                    example: false
        401:
          description: |
            - NO_USER 입력한 이메일과 일치하는 유저가 없습니다.
            - BAN_MEMBER 로그인 금지된 계정입니다. 관리자에게 문의 하세요.
            - INVALID_MEMBER 회원가입이 완료되지 않았습니다.
        403:
          description: |
            - EXCEED_RETRY 로그인 시도 횟수 5회 초과 입니다.
            - INVALID_PASSWORD 잘못된 비밀번호 입니다.
        500:
          description: NO_URL_OR_METHOD 로그인 jwt fund에 반영 실패!
  /auth/otp/mobile/verify:
    post:
      summary: otp 확인
      description: 요청한 otp 확인
      operationId: postAuthMobileVerify
      tags:
        - Auth OTP
      parameters:
        - in: header
          name: otpcode
          description: 발급받은 otp 번호
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        400:
          description: INVALID_CODE, The code provided does not match the expected value
      security:
        - cookieAuth: []
  /auth/member/bio/verify:
    post:
      tags:
        - Auth Bio
      summary: 바이오 인증
      description: 바이오 인증요청
      operationId: postAuthMemberBioVerify
      parameters:
        - in: header
          name: nonce
          description: 바이오sign시, 사용한 nonce
          schema:
            type: number
            example: 37790051
        - in: header
          name: signature
          description: 바이오sign시, 나온 signature. url-safe base64
          schema:
            type: string
            example: MEYCIQDIhAvWQFRqa_vV8PCfKRe9R9ia955dlL7S6UG_Zp8RtgIhANdrVql-ZjrpCxaM0saAf2gBqXRKeXIX5USinmncahLX
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    example: OK
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
      security:
        - cookieAuth: []

  #---
  # Fund API
  #---
  /fund/fundraisings:
    get:
      tags:
      - Fundraising
      summary: get fundraising list
      operationId: getFundFundraisings
      parameters:
        - in: query
          name: currencyCode
          description: 'Multi Currency 통화코드 (default: GBP)'
          schema:
            $ref: "#/components/schemas/CurrencyCode"
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FundraisingView"
      security:
        - cookieAuth: []
  /fund/fundraisings/{id}:
    get:
      tags:
      - Fundraising
      summary: get a fundraising
      description: 조회 결과가 없을 경우 [] 빈배열 반환
      operationId: getFundFundraisingId
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
          description: 조회하려는 assetId
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                $ref: "#/components/schemas/FundraisingView"
      security:
        - cookieAuth: []
  /fund/investments:	
    post:	
      tags:	
        - Fund Investment	
      summary: 투자요청	
      description: 해당 Asset에 투자를 한다.	
      operationId: postFundInvestments	
      parameters:	
        - in: header	
          name: otpcode?	
          schema:	
            type: string	
          description: otp 인증 코드	
        - in: header	
          name: nonce?	
          schema:	
            type: string	
          description: bio인증시, 모바일에서 사용된 nonce값	
        - in: header	
          name: signature?	
          schema:	
            type: string	
          description: bio 인증시, signature, URL_SAFE_BASE64	
      requestBody:	
        content:	
          application/json:	
            schema:	
              type: object	
              properties:	
                fundraisingId:	
                  description: 투자할 fundrasing id	
                  type: integer	
                amount:	
                  description: 투자금액 (GBP)	
      responses:	
        200:	
          description: Success	
          content:	
            application/json:	
              schema:	
                type: object	
                properties:	
                  result:	
                    type: string	
                    example: OK	
        404:	
          description: "INVALID_KEY 입력한 key값이 잘못되었을때"
  /fund/wallets/me:
    get:
      tags:
        - Fund Wallets
      summary: 자신의 Currency 별 Wallet List
      description: 자신의 Currency 별로 Balance와 총 투자금액을 보여준다.
      operationId: getFundMeWallets
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Wallet"
        404:
          description: |
            - NO_DATA, Not find waiting with userId
            - NO_USER, User not found with {email}
      security:
        - cookieAuth: []

  /fund/wallet/me/{currency}:
    get:
      tags:
        - Fund Wallets
      summary: 자신의 지갑의 입출금 내역과 잔고 확인
      description: 자신의 입출금, 투자, 배분등 돈이 들어오고 나가는 transaction 정보와 잔고 표시
      operationId: getFundMeWalletCurrency
      parameters:
        - in: path
          name: currency
          required: true
          schema:
            type: string
            $ref: "#/components/schemas/CurrencyCode"
      responses:
        200:
          description: "successful operation"
          content:
            application/json:
              schema:
                properties:
                  balance:
                    type: integer
                    description: 현재 잔액 (GBP기준)
                    example: 15000
                  currencyCode:
                    $ref: "#/components/schemas/CurrencyCode"
                  bankAccount?:
                    type: object
                    $ref: '#/components/schemas/BankAccount'
                  txs:
                    type: array
                    description: 거래내역, group ordering (Waiting -> Processing -> Complete)
                    items:
                      $ref: "#/components/schemas/AccountTx"
      security:
        - cookieAuth: []

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: liberty.sid
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    MobileVersion:
      type: object
      properties:
        minVersionCode:
          type: integer
          description: 최소 동작을 위한 mobile 버전 코드
          example: 1
        minVersionName:
          type: string
          description: 최소 동작을 위한 mobile 버전명
          example: 0.0.1
        latestVersionCode:
          type: integer
          description: 최신 mobile 버전 코드
          example: 1
        latestVersionName:
          type: string
          description: 최신 mobile 버전명
          example: 0.0.1
    CurrencyCode:
      type: string
      enum: [AUD, CAD, CHF, CNH, EUR, GBP, HKD, JPY, NZD, NOK, SEK, SGD, USD]
      description: Currency 통화코드
      example: GBP
    CountryCode:
      type: string
      enum: [AUS, CAN, CHE, CHN, EUR, GBR, HKG, JPN, NZL, NOR, SWE, SGP, USA]
      example: GBR
    onboardingStatus:
      type: string
      enum: [INIT_MEMBER, MOBILE_OTP_VERIFIED, PASSWORD_SET, EMAIL_OTP_VERIFIED,
            PK_SET, SUITABILITY_DONE, PROFILE_SUBMITTED, ID_SUBMITTED, KYC_READY,
            PENDING_KYCAML, OCR_FAILED, FACE_FAILED, EDD_REQUIRED, POA_REQUIRED,
            POA_FAILED, UNDER18, DUPLICATE_PASSPORT, REJECTED_KYCAML,
            WHITELISTING, RI_VERIFIED]
      description: 회원가입 진행 상태, userStatus가 NOT_MEMBER인 경우 값이 없을 수 있다.
                  (최초 회원가입시 이 값은 없다.)
    userStatus:
      type: string
      enum: [NOT_MEMBER, EPH_MEMBER, ONBOARDING_MEMBER, BANED_MEMBER, MEMBER,
            DELETED_MEMBER]
      description: NOT_MEMBER - email등록 하지 않은 경우 / EPH_MEMBER - 가입시작하고 otp 완료 전
                  / ONBOARDING_MEMBER - otp인증 후 부터 회원가입 완료시 까지
    AuthLevel:
      type: string
      enum: [NEW, EMAIL, PASSWORD, OTP, SUITABILITY, PROFILE, ID_SUBMITTED,
            PENDING_KYCAML, KYCAML, SIGN_UP, BANK_ACCOUNT, ADD_FUNDED, INVESTED]
      description: 회원 활동 상태
    SuitabilityQuestions:
      type: array
      items:
        type: object
        properties:
          number:
            type: number
            description: 질문 번호
            example: 1
          contents:
            type: string
            description: 질문 내용
            example: 1 + 1
          items:
            type: array
            items:
              -
                itemId:
                  type: string
                  description: 질문의 보기 id
                  enum: ['A','B','C']
                  example: A
                contents:
                  type: string
                  description: 질문의 보기 내용
                  example: '1'
              -
                itemId:
                  type: string
                  description: 질문의 보기 id
                  enum: ['A','B','C']
                  example: B
                contents:
                  type: string
                  description: 질문의 보기 내용
                  example: '2'
              -
                itemId:
                  type: string
                  description: 질문의 보기 id
                  enum: ['A','B','C']
                  example: C
                contents:
                  type: string
                  description: 질문의 보기 내용
                  example: '3'
    Wallet:
      type: object
      properties:
        currencyName:
          type: "string"
          description: currency name
          example: Pounds sterling
        currencyCode:
          $ref: "#/components/schemas/CurrencyCode"
        countryCode:
          $ref: "#/components/schemas/CountryCode"
        symbol:
          type: string
          description: currency symbol
          example: £
        balance:
          type: integer
          example: 198000
        totalInvested:
          type: integer
          example: 1000
        investingAmount:
          type: integer
          example: 1000
          description: fundraising 진행 중인 투자금액
        investedAmount:
          type: integer
          example: 1000
          description: fundraising 완료된 투자금액
    BankAccount:
      type: "object"
      properties:
        accountNumber:
          type: "string"
          description: "계좌번호"
          example: '123*****789'
        accountOwner:
          type: "string"
          description: "예금주명"
          example: '홍길동'
        confirmStatus:
          type: "string"
          description: 계좌 확인 상태 ["OPEN" - 확인코드 확인 전, "CODE_SENT" - 관리자가 확인코드와 함께 1$ 입금, "DONE" - 확인코드 확인 후]
          enum: [WAITING_MONEY_TRANSFER, OPEN, CODE_SENT, REVIEWED, PROCESSING, READY, DISTRIBUTING, DONE, REJECTED]
        bankName:
          type: "string"
          description: 은행이름
          example: 'GoodBank'
        bankCountry:
          type: "string"
          description: 은행 국가
          example: 'UK'
        swiftCode:
          type: string
          description: swiftCode
    AccountTx:
      type: object
      properties:
        id:
          type: integer
          description: account id
          example: 1
        userId:
          type: integer
          description: 거래 발생 userId
          example: 1
        pecuniaryType:
          type: string
          description: 돈의 흐름 관점에서의 tx 형태
          enum:
            - WITHDRAW
            - ADD_FUNDS
            - INVEST
            - REFUND
            - INTEREST
            - DIVIDEND
            - PRINCIPAL
            - FUNDING
          example: ADD_FUNDS
        amount:
          type: integer
          description: 거래액
          example: 5000
        fee:
          type: integer
          description: 수수료
          example: 1000
        processStatus:
          type: string
          description: 거래의 처리상태
          enum:
            - Waiting
            - Processing
            - Complete
          example: Complete
        lastBalance:
          type: integer
          description: transaction 발생 시점의 balance. 단, processStatus 가 "Waiting" 인 경우에는 null.
          example: 10000
        targetBankAccount:
          type: string
          description: transaction 으로 인해 입금될 은행 계좌 (add-fund 인 경우에 SA 은행 정보, withdraw 인 경우에 사용자 은행 정보)
          example: HSBC 123*****789
        desc:
          type: string
          description: 거래 설명 (특정 asset 과 관련된 거래라면 asset 이름)
          example: Hilton Hotel
        sourceId:
          type: integer
          description: 거래 발생 소스의 id (WITHDRAW의 경우 requests 테이블의 id)
          example: 5000
        sortDate:
          type: string
          description: txs 정렬 시 기준 값으로 사용
          example: "2019-08-26T06:08:14.000Z"
        createdAt:
          type: string
          example: "2019-08-26T06:08:14.000Z"
        updatedAt:
          type: string
          example: "2019-08-26T06:08:14.000Z"
    FundraisingStatus:
      type: string
      enum:
        - LISTED
        - STARTING
        - RUNNING
        - CLOSING
        - CLOSED
        - EXECUTING
        - SUCCEEDED
        - FAILED
    AssetStatusForUser:
      type: string
      description: 자산 상태 - 유저용
      enum:
        - ComingSoon
        - Fundraising
        - Processing
        - Active
        - Refunded
    AssetType:
      type: string
      description: 자산 종류
      enum:
        - JUNIOR_DEBT
        - SENIOR_DEBT
        - EQUITY
    FundraisingView:
      type: object
      properties:
        id:
          type: integer
          example: 123123
        name:
          type: string
          example: Shareable Asset Holdings
        description:
          type: string
          example: |
            Class A-1 Bonds – S$180m Class A-1 Bonds offered to retail investors in Singapore (Stock Code: 5A1B)
            10MC5 Mandatory Call at end of Year 5 (20 June 2024)
            Fixed interest of 3.85% p.a., payable every six months
            1.0% p.a. interest rate step-up if bond is not redeemed after 5 years
            Bonus payment of 0.5% of principal at redemption if performance condition is met
        assetStatus:
          $ref: '#/components/schemas/FundraisingStatus'
        assetStatusForUser:
          $ref: '#/components/schemas/AssetStatusForUser'
        daysLeft:
          type: number
          example: 15
        currentRaise:
          type: number
          example: 400000
        progress:
          type: integer
          description: '%'
          example: 22
        numberOfInvestors:
          type: integer
        documents:
          type: array
          items:
            type: object
            properties:
              fileLink:
                type: "string"
              fileName:
                type: "string"
        videos:
          type: array
          items:
            type: object
            properties:
              fileLink:
                type: "string"
              fileName:
                type: "string"

        issuer:
          type: object
          properties:
            id:
              type: integer
              example: 1
            issuerName:
              type: string
              example: Standard Chartered
            rating:
              type: string
              example: Asf/A+(sf)
            guarantor:
              type: string
              example: SC Bank
            website:
              type: string
              example: https://www.company.com
        bookRunners:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              name:
                type: string
                example: HSBC
        asset:
          type: object
          properties:
            id:
              type: number
              example: 1
            ISIN:
              type: string
              example: ABCD12345
            domesticIdentifier:
              type: string
              example: ABCD12355
            class:
              type: string
              enum:
                - A-1
              example: A-1
              description: '[Todo] SelectBox확인'
            currencyCode:
              $ref: '#/components/schemas/CurrencyCode'
            scheduledCallDate:
              type: string
              example: 24 June 2022
            issuePrice:
              type: number
              description: '%'
              example: 100
            minimumDenomination:
              type: number
              example: 1000000
            assetCode:
              type: string
              example: SCB
            assetType:
              $ref: '#/components/schemas/AssetType'
            dealSize:
              type: number
              example: 1000000000
            maturityDate:
              type: string
              example: June 2025
            countryOfRisk:
              type: string
              example: Singapore
            marketOfIssuance:
              type: string
              example: Singopore
            ranking:
              type: integer
              example: 10
